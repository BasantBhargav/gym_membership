<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gym Membership Dashboard</title>
  <link rel="stylesheet" href="css/style.css">
  <script>
    // Check authentication
    window.addEventListener('DOMContentLoaded', () => {
      const token = localStorage.getItem('token');
      if (!token) {
        window.location.href = 'login.html';
      }
    });
  </script>
</head>
<body>
  <div class="main-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2>üí™ GymPro</h2>
      </div>
      
      <nav class="sidebar-nav">
        <button class="nav-item active" onclick="switchTab('dashboard')">
          <span class="icon">üìä</span>
          <span>Dashboard</span>
        </button>
        <button class="nav-item" onclick="switchTab('members')">
          <span class="icon">üë•</span>
          <span>Members</span>
        </button>
        <button class="nav-item" onclick="switchTab('payments')">
          <span class="icon">üí≥</span>
          <span>Payments</span>
        </button>
        <button class="nav-item" onclick="switchTab('reports')">
          <span class="icon">üìà</span>
          <span>Reports</span>
        </button>
      </nav>
      
      <div class="sidebar-footer">
        <button class="logout-btn" onclick="handleLogout()">üö™ Logout</button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Top Header -->
      <header class="top-header">
        <div class="header-left">
          <h1 id="pageTitle">Dashboard</h1>
        </div>
        <div class="header-right">
          <div class="owner-info">
            <span id="ownerEmail">Loading...</span>
            <span id="gymName" class="gym-name"></span>
          </div>
        </div>
      </header>

      <!-- Content Area -->
      <div class="content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="page-section active">
          <div id="dashboardContent">
            <!-- Summary Cards -->
            <div class="summary-section">
              <h2>üìä Summary</h2>
              <div class="stats-grid" id="statsGrid">
                <!-- Stats will load here -->
              </div>
            </div>

            <!-- Revenue Section -->
            <div class="revenue-section">
              <h2>üí∞ Revenue Snapshot</h2>
              <div class="revenue-grid" id="revenueGrid">
                <!-- Revenue will load here -->
              </div>
            </div>

            <!-- Alerts Section -->
            <div class="alerts-section">
              <h2>üîî Alerts & Insights</h2>
              <div class="alerts-container">
                <div class="alert-card" id="dueSoonCard">
                  <!-- Due soon alerts -->
                </div>
                <div class="alert-card" id="expiredCard">
                  <!-- Expired alerts -->
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Members Section -->
        <section id="members" class="page-section">
          <div class="section-header">
            <h2>üë• Member Management</h2>
            <button class="btn btn-primary" onclick="openAddMemberModal()">+ Add Member</button>
          </div>

          <div class="filters">
            <select id="memberFilter" onchange="filterMembers()">
              <option value="all">All Members</option>
              <option value="active">Active</option>
              <option value="expired">Expired</option>
            </select>
          </div>

          <div id="membersTable" class="table-container">
            <!-- Members table will load here -->
          </div>
        </section>

        <!-- Payments Section -->
        <section id="payments" class="page-section">
          <div class="section-header">
            <h2>üí≥ Payment Management</h2>
            <button class="btn btn-primary" onclick="openAddPaymentModal()">+ Record Payment</button>
          </div>

          <div class="filters">
            <input type="text" id="paymentSearch" placeholder="Search member..." onkeyup="searchPayments()">
          </div>

          <div id="paymentsTable" class="table-container">
            <!-- Payments table will load here -->
          </div>
        </section>

        <!-- Reports Section -->
        <section id="reports" class="page-section">
          <div class="section-header">
            <h2>üìà Reports & Analytics</h2>
          </div>

          <!-- Revenue Reports -->
          <div class="report-card">
            <h3>üíπ Revenue Report</h3>
            <div class="report-content" id="revenueReport">
              <!-- Revenue report will load here -->
            </div>
          </div>

          <!-- Member Reports -->
          <div class="report-card">
            <h3>üìã Member Report</h3>
            <div class="report-content" id="memberReport">
              <!-- Member report will load here -->
            </div>
          </div>

          <!-- Payment Breakdown -->
          <div class="report-card">
            <h3>üîç Payment Breakdown</h3>
            <div class="report-content" id="paymentBreakdown">
              <!-- Payment breakdown will load here -->
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <!-- Add Member Modal -->
  <div id="addMemberModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Add New Member</h2>
        <button class="modal-close" onclick="closeModal('addMemberModal')">√ó</button>
      </div>
      
      <div id="memberAlert" class="alert"></div>
      
      <form onsubmit="handleAddMember(event)">
        <div class="form-row">
          <div class="form-group">
            <label>Full Name *</label>
            <input type="text" id="memberName" required>
          </div>
          <div class="form-group">
            <label>Phone *</label>
            <input type="tel" id="memberPhone" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="memberEmail">
          </div>
          <div class="form-group">
            <label>Plan *</label>
            <select id="memberPlan" required>
              <option value="">Select Plan</option>
              <option value="basic">Basic (‚Çπ500/month)</option>
              <option value="premium">Premium (‚Çπ800/month)</option>
              <option value="elite">Elite (‚Çπ1200/month)</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>Duration (Months) *</label>
          <input type="number" id="memberDuration" min="1" value="1" required>
        </div>
        
        <button type="submit" class="btn btn-primary btn-block">Add Member</button>
      </form>
    </div>
  </div>

  <!-- Add Payment Modal -->
  <div id="addPaymentModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Record Payment</h2>
        <button class="modal-close" onclick="closeModal('addPaymentModal')">√ó</button>
      </div>
      
      <div id="paymentAlert" class="alert"></div>
      
      <form onsubmit="handleAddPayment(event)">
        <div class="form-group">
          <label>Member *</label>
          <select id="paymentMemberId" required>
            <option value="">Select Member</option>
          </select>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Amount (‚Çπ) *</label>
            <input type="number" id="paymentAmount" min="1" required>
          </div>
          <div class="form-group">
            <label>Method *</label>
            <select id="paymentMethod" required>
              <option value="">Select Method</option>
              <option value="cash">Cash</option>
              <option value="credit_card">Credit Card</option>
              <option value="debit_card">Debit Card</option>
              <option value="upi">UPI</option>
              <option value="bank_transfer">Bank Transfer</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>Transaction ID (Online only)</label>
          <input type="text" id="paymentTransactionId">
        </div>
        
        <button type="submit" class="btn btn-primary btn-block">Record Payment</button>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/api.js"></script>
  <script src="js/dashboard.js"></script>
  <script src="js/members.js"></script>
  <script src="js/payments.js"></script>
  <script src="js/reports.js"></script>
  <script src="js/auth.js"></script>
</body>
</html>
    <div class="card">
      <div class="card-title" style="text-align: center;">Gym Membership</div>
      
      <!-- Login Form -->
      <div id="loginForm">
        <h3 style="color: #2c3e50; margin-bottom: 1.5rem;">Owner Login</h3>
        <div id="loginAlert" class="alert"></div>
        
        <form onsubmit="handleLogin(event)">
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="loginEmail" required>
          </div>
          
          <div class="form-group">
            <label>Password</label>
            <input type="password" id="loginPassword" required>
          </div>
          
          <button type="submit" class="btn btn-primary btn-block">Login</button>
        </form>
        
        <p style="text-align: center; margin-top: 1rem; color: #7f8c8d;">
          Don't have account? <a href="#" onclick="switchToRegister()" style="color: #3498db; cursor: pointer;">Register here</a>
        </p>
      </div>

      <!-- Register Form (Hidden) -->
      <div id="registerForm" style="display: none;">
        <h3 style="color: #2c3e50; margin-bottom: 1.5rem;">Register Gym Owner</h3>
        <div id="registerAlert" class="alert"></div>
        
        <form onsubmit="handleRegister(event)">
          <div class="form-row">
            <div class="form-group">
              <label>Full Name</label>
              <input type="text" id="regName" required>
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="regEmail" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label>Phone</label>
              <input type="tel" id="regPhone" required>
            </div>
            <div class="form-group">
              <label>Password</label>
              <input type="password" id="regPassword" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label>Gym Name</label>
              <input type="text" id="regGymName" required>
            </div>
            <div class="form-group">
              <label>Gym Address</label>
              <input type="text" id="regGymAddress">
            </div>
          </div>
          
          <button type="submit" class="btn btn-primary btn-block">Register</button>
        </form>
        
        <p style="text-align: center; margin-top: 1rem; color: #7f8c8d;">
          Already have account? <a href="#" onclick="switchToLogin()" style="color: #3498db; cursor: pointer;">Login here</a>
        </p>
      </div>
    </div>
  </div>

  <!-- Main App Container -->
  <div id="appContainer" style="display: none;">
    <!-- Header -->
    <header>
      <div class="container">
        <h1>
          <span id="gymNameHeader">Gym Membership Management</span>
          <button class="logout-btn" onclick="handleLogout()">Logout</button>
        </h1>
        <p class="gym-info">Welcome, <span id="ownerNameHeader">User</span> | <span id="gymAddressHeader"></span></p>
      </div>
    </header>

    <!-- Main Content -->
    <div class="container">
      <!-- Navigation Tabs -->
      <div class="nav-tabs">
        <button class="active" onclick="switchTab('dashboard')">Dashboard</button>
        <button onclick="switchTab('members')">Members</button>
        <button onclick="switchTab('payments')">Payments</button>
      </div>

      <!-- Dashboard Section -->
      <div id="dashboard" class="section active">
        <div id="dashboardContent">
          <div class="stats-grid" id="statsGrid">
            <!-- Stats will be loaded here -->
          </div>
          
          <div class="card">
            <div class="card-title">Recent Payments</div>
            <div id="recentPaymentsTable">
              <!-- Table will be loaded here -->
            </div>
          </div>
        </div>
      </div>

      <!-- Members Section -->
      <div id="members" class="section">
        <div class="card">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
            <div class="card-title" style="margin: 0;">Members</div>
            <button class="btn btn-primary" onclick="openAddMemberModal()">+ Add Member</button>
          </div>
          <div id="membersTable">
            <!-- Table will be loaded here -->
          </div>
        </div>
      </div>

      <!-- Payments Section -->
      <div id="payments" class="section">
        <div class="card">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
            <div class="card-title" style="margin: 0;">Payments</div>
            <button class="btn btn-primary" onclick="openAddPaymentModal()">+ Record Payment</button>
          </div>
          <div id="paymentsTable">
            <!-- Table will be loaded here -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Member Modal -->
  <div id="addMemberModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Add New Member</h2>
        <button class="modal-close" onclick="closeModal('addMemberModal')">√ó</button>
      </div>
      
      <div id="memberAlert" class="alert"></div>
      
      <form onsubmit="handleAddMember(event)">
        <div class="form-group">
          <label>Member Name *</label>
          <input type="text" id="memberName" required>
        </div>
        
        <div class="form-group">
          <label>Phone Number *</label>
          <input type="tel" id="memberPhone" required>
        </div>
        
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="memberEmail">
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Membership Type *</label>
            <select id="membershipType" required>
              <option value="">Select Type</option>
              <option value="basic">Basic (‚Çπ500/month)</option>
              <option value="premium">Premium (‚Çπ800/month)</option>
              <option value="elite">Elite (‚Çπ1200/month)</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Duration (Months) *</label>
            <input type="number" id="membershipDuration" min="1" value="1" required>
          </div>
        </div>
        
        <button type="submit" class="btn btn-primary btn-block">Add Member</button>
      </form>
    </div>
  </div>

  <!-- Add Payment Modal -->
  <div id="addPaymentModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Record Payment</h2>
        <button class="modal-close" onclick="closeModal('addPaymentModal')">√ó</button>
      </div>
      
      <div id="paymentAlert" class="alert"></div>
      
      <form onsubmit="handleAddPayment(event)">
        <div class="form-group">
          <label>Member *</label>
          <select id="paymentMemberId" required>
            <option value="">Select Member</option>
            <!-- Options will be populated -->
          </select>
        </div>
        
        <div class="form-group">
          <label>Amount (‚Çπ) *</label>
          <input type="number" id="paymentAmount" min="1" required>
        </div>
        
        <div class="form-group">
          <label>Payment Method *</label>
          <select id="paymentMethod" required>
            <option value="">Select Method</option>
            <option value="cash">Cash</option>
            <option value="credit_card">Credit Card</option>
            <option value="debit_card">Debit Card</option>
            <option value="upi">UPI</option>
            <option value="bank_transfer">Bank Transfer</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>Transaction ID (Optional)</label>
          <input type="text" id="paymentTransactionId">
        </div>
        
        <button type="submit" class="btn btn-primary btn-block">Record Payment</button>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/api.js"></script>
  <script src="js/dashboard.js"></script>
  <script src="js/members.js"></script>
  <script src="js/payments.js"></script>
  <script src="js/memberHistory.js"></script>
  <script src="js/auth.js"></script>
</body>
</html>
